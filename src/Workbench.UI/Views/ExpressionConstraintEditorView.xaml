<UserControl x:Class="Workbench.Views.ExpressionConstraintEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:Workbench.Controls"
             xmlns:cal="http://www.caliburnproject.org"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid Height="60">
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="ConstraintNameColumn" Width="Auto"/>
            <ColumnDefinition x:Name="ConstraintExpressionColumn" Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- 
        An adorned control is used to enable the edit button when the user 
        hovers over the constraint name control.
        -->
        <controls:AdornedControl
                    HorizontalAdornerPlacement="Outside"
                    VerticalAdornerPlacement="Outside"
                    AdornerOffsetX="-12"
                    AdornerOffsetY="8"
                    IsMouseOverShowEnabled="{Binding ElementName=modelControl, Path=IsNotDragging}">

            <!-- The name of the domain. -->
            <controls:EditableTextBlock
                        x:Name="nameEditor"
                        Text="{Binding Name, Mode=TwoWay}"
                        IsInEditMode="{Binding IsNameEditing, Mode=TwoWay}"
                        FontFamily="Courier New"
                        FontWeight="Bold"
                        FontSize="24"
                        FontStyle="Italic"/>

            <controls:AdornedControl.AdornerContent>

                <!-- 
                    This is the adorner that pops up when the user hovers the mouse over the constraint name.
                    It displays a button that the user can click to edit the name.
                    -->
                <Canvas x:Name="constraintAdornerCanvas"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                Width="30"
                                Height="30">
                    <Line X1="0"
                                    Y1="30"
                                    X2="15"
                                    Y2="15"
                                    Stroke="Black"
                                    StrokeThickness="1"/>
                    <Button x:Name="editConstraintButton"
                                    Canvas.Left="10"
                                    Canvas.Top="0"
                                    Width="20"
                                    Height="20"
                                    Cursor="Hand"
                                    Focusable="False"
                                    Command="{Binding EditNameCommand}"
                                    CommandParameter="{Binding}"
                                    Template="{StaticResource editButtonTemplate}"/>
                </Canvas>
            </controls:AdornedControl.AdornerContent>
        </controls:AdornedControl>

        <ContentControl Grid.Column="1" cal:View.Model="{Binding Expression}"/>
    </Grid>
</UserControl>
